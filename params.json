{"name":"Mongoid-sequence2","tagline":"Specify fields to behave like a sequence number (exactly like the \"id\" column in conventional SQL flavors) while using Mongoid.","body":"# Mongoid Sequence\r\n\r\nMongoid Sequence allows you to specify fields to behave like a sequence number (exactly like the \"id\" column in conventional SQL flavors).\r\n\r\n## Credits\r\n\r\nThis gem was inspired by a couple of gists by [masatomo](https://gist.github.com/730677) and [ShogunPanda](https://gist.github.com/1086265).\r\n\r\nand\r\n\r\nhttps://github.com/agile42/mongoid_sequence2/ **from francis**\r\n\r\n## Usage\r\n\r\n### setup\r\n\r\nsince `v0.2.3` you can specific custom default storage options for `Mongoid::Sequences`, eg:\r\n\r\n    #config/initializers/sequence2.rb\r\n    Mongoid::Sequence2.setup do |config|\r\n     config.collection_name = :__sequences\r\n     config.session = :default\r\n    end\r\n\r\n\r\nInclude `Mongoid::Sequence` in your class and call `sequence(:field)`.\r\n\r\nLike this:\r\n\r\n```ruby\r\nclass Sequenced\r\n\tinclude Mongoid::Document\r\n\tinclude Mongoid::Sequence\r\n\r\n\tfield :my_sequence, :type => Integer\r\n\tsequence :my_sequence\r\nend\r\n\r\ns1 = Sequenced.create\r\ns1.sequence #=> 1\r\n\r\ns2 = Sequenced.create\r\ns2.sequence #=> 2 # and so on\r\n```\r\n\r\nIt's also possible to make the `id` field behave like this:\r\n\r\n```ruby\r\nclass Sequenced\r\n\tinclude Mongoid::Document\r\n\tinclude Mongoid::Sequence\r\n\r\n\tsequence :_id\r\nend\r\n\r\ns1 = Sequenced.create\r\ns1.id #=> 1\r\n\r\ns2 = Sequenced.create\r\ns2.id #=> 2 # and so on\r\n```\r\n\r\nYou can also have any per model sequence without need to create given model's objects:\r\n\r\n```ruby\r\nclass Sequenced\r\n\tinclude Mongoid::Document\r\n\tinclude Mongoid::Sequence\r\nend\r\n\r\nSequenced.next_sequence('some_name_1') #=> 1\r\nSequenced.next_sequence('some_name_1') #=> 2\r\nSequenced.next_sequence('some_name_2') #=> 1\r\n# can also give an special step\r\nSequenced.next_sequence('some_name_2', 2) #=> 3\r\n```\r\n\r\n**notice**:\r\n\r\nfor `v0.2.5`, `step` should only work with no `auto_increment` field, more info check `test/reference_test.rb`\r\n\r\n\r\n## Consistency\r\n\r\nMongoid::Sequence uses the atomic [findAndModify](http://www.mongodb.org/display/DOCS/findAndModify+Command) command, so you shouldn't have to worry about the sequence's consistency.\r\n\r\n## Installation\r\n\r\nJust add it to your projects' `Gemfile`:\r\n\r\n```ruby\r\ngem \"mongoid-sequence2\"\r\n```\r\n\r\n## Thanks\r\n\r\nthanks [masatomo](https://github.com/masatomo), [goncalossilva](https://github.com/goncalossilva), [agile42](https://github.com/agile42)\r\n\r\n\r\n<hr/>\r\n\r\nCopyright © 2010 Gonçalo Silva, released under the MIT license\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}